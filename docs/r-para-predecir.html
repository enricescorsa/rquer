<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R que R</title>
  <meta name="description" content="This is an introductory book on R programming language in Spanish written by Enric Escorsa O’Callaghan">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R que R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="fotoenric2.png" />
  <meta property="og:description" content="This is an introductory book on R programming language in Spanish written by Enric Escorsa O’Callaghan" />
  <meta name="github-repo" content="enricescorsa/bookdown-enric" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R que R" />
  
  <meta name="twitter:description" content="This is an introductory book on R programming language in Spanish written by Enric Escorsa O’Callaghan" />
  <meta name="twitter:image" content="fotoenric2.png" />

<meta name="author" content="Enric Escorsa O’Callaghan">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="r-para-explorar.html">
<link rel="next" href="r-para-visualizar.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R que R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prefacio</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#indice-de-contenidos"><i class="fa fa-check"></i><b>1.1</b> Indice de contenidos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Intro</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#manejarse-en-el-entorno-de-r"><i class="fa fa-check"></i><b>2.1</b> Manejarse en el entorno de R</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#variables"><i class="fa fa-check"></i><b>2.2</b> Variables</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#vectores"><i class="fa fa-check"></i><b>2.3</b> Vectores</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#tablas"><i class="fa fa-check"></i><b>2.4</b> Tablas</a></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#funciones"><i class="fa fa-check"></i><b>2.5</b> Funciones</a></li>
<li class="chapter" data-level="2.6" data-path="intro.html"><a href="intro.html#paquetes"><i class="fa fa-check"></i><b>2.6</b> Paquetes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-para-explorar.html"><a href="r-para-explorar.html"><i class="fa fa-check"></i><b>3</b> R para Explorar</a><ul>
<li class="chapter" data-level="3.1" data-path="r-para-explorar.html"><a href="r-para-explorar.html#leer-datos"><i class="fa fa-check"></i><b>3.1</b> Leer datos</a><ul>
<li class="chapter" data-level="3.1.1" data-path="r-para-explorar.html"><a href="r-para-explorar.html#leer-datos-de-un-archivo"><i class="fa fa-check"></i><b>3.1.1</b> Leer datos de un archivo</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-para-explorar.html"><a href="r-para-explorar.html#leer-datos-contenidos-en-un-excel"><i class="fa fa-check"></i><b>3.1.2</b> Leer datos contenidos en un excel</a></li>
<li class="chapter" data-level="3.1.3" data-path="r-para-explorar.html"><a href="r-para-explorar.html#leer-datos-de-una-pagina-web"><i class="fa fa-check"></i><b>3.1.3</b> Leer datos de una página web</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="r-para-explorar.html"><a href="r-para-explorar.html#acomodar-datos"><i class="fa fa-check"></i><b>3.2</b> Acomodar datos</a><ul>
<li class="chapter" data-level="3.2.1" data-path="r-para-explorar.html"><a href="r-para-explorar.html#funciones-base-en-r"><i class="fa fa-check"></i><b>3.2.1</b> Funciones base en R</a></li>
<li class="chapter" data-level="3.2.2" data-path="r-para-explorar.html"><a href="r-para-explorar.html#paquete-dplyr"><i class="fa fa-check"></i><b>3.2.2</b> Paquete dplyr</a></li>
<li class="chapter" data-level="3.2.3" data-path="r-para-explorar.html"><a href="r-para-explorar.html#limpiar-textos"><i class="fa fa-check"></i><b>3.2.3</b> Limpiar textos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-para-predecir.html"><a href="r-para-predecir.html"><i class="fa fa-check"></i><b>4</b> R para Predecir</a><ul>
<li class="chapter" data-level="4.1" data-path="r-para-predecir.html"><a href="r-para-predecir.html#correlacion"><i class="fa fa-check"></i><b>4.1</b> Correlación</a></li>
<li class="chapter" data-level="4.2" data-path="r-para-predecir.html"><a href="r-para-predecir.html#regresion"><i class="fa fa-check"></i><b>4.2</b> Regresión</a><ul>
<li class="chapter" data-level="4.2.1" data-path="r-para-predecir.html"><a href="r-para-predecir.html#regresion-lineal"><i class="fa fa-check"></i><b>4.2.1</b> Regresión lineal</a></li>
<li class="chapter" data-level="4.2.2" data-path="r-para-predecir.html"><a href="r-para-predecir.html#regresion-logistica"><i class="fa fa-check"></i><b>4.2.2</b> Regresión logística</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="r-para-predecir.html"><a href="r-para-predecir.html#proyectar-forecast"><i class="fa fa-check"></i><b>4.3</b> Proyectar (Forecast)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-para-visualizar.html"><a href="r-para-visualizar.html"><i class="fa fa-check"></i><b>5</b> R para Visualizar</a><ul>
<li class="chapter" data-level="5.1" data-path="r-para-visualizar.html"><a href="r-para-visualizar.html#graficos-de-dispersion"><i class="fa fa-check"></i><b>5.1</b> Gráficos de dispersión</a></li>
<li class="chapter" data-level="5.2" data-path="r-para-visualizar.html"><a href="r-para-visualizar.html#histogramas"><i class="fa fa-check"></i><b>5.2</b> Histogramas</a></li>
<li class="chapter" data-level="5.3" data-path="r-para-visualizar.html"><a href="r-para-visualizar.html#redes"><i class="fa fa-check"></i><b>5.3</b> Redes</a></li>
<li class="chapter" data-level="5.4" data-path="r-para-visualizar.html"><a href="r-para-visualizar.html#mapas-geograficos"><i class="fa fa-check"></i><b>5.4</b> Mapas geográficos</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-que-r.html"><a href="r-que-r.html"><i class="fa fa-check"></i><b>6</b> R que R</a><ul>
<li class="chapter" data-level="6.1" data-path="r-que-r.html"><a href="r-que-r.html#tutoriales"><i class="fa fa-check"></i><b>6.1</b> Tutoriales</a></li>
<li class="chapter" data-level="6.2" data-path="r-que-r.html"><a href="r-que-r.html#obtener-ayuda"><i class="fa fa-check"></i><b>6.2</b> Obtener ayuda</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sumario.html"><a href="sumario.html"><i class="fa fa-check"></i><b>7</b> Sumario</a></li>
<li class="chapter" data-level="" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i>Referencias</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R que R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-para-predecir" class="section level1">
<h1><span class="header-section-number">Capítulo 4</span> R para Predecir</h1>
<p><br></p>
<blockquote>
<p>“The problem with experts is that they don’t know what they don’t know….”</p>
<p>— Nassim Taleb</p>
</blockquote>
<p><br>
<br></p>
<p>Con R es también sencillo aplicar modelos de regresión y correlación a nuestros datos, modelos estadísticos predictivos, etc.</p>
<div id="correlacion" class="section level2">
<h2><span class="header-section-number">4.1</span> Correlación</h2>
<p>No hemos comentado todavía que en el repositorio de R existen varios datasets de ejemplo con los que podemos trabajar y que podemos invocar con sólo llamarlos por su nombre. Uno de ellos es <em>mtcars</em>. Se trata de una base de datos de modelos de coches y sus distintas prestaciones o características técnicas expresadas como variables.</p>
<p>Echémosle un vistazo:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">head</span>(mtcars)</a></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>Veamos,por ejemplo, con la ayuda de la función <strong>cor()</strong> si existen correlaciones entre las variables <em>mpg</em> (miles per galon), <em>cyl</em> (cilindrada), etc.:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="co"># ponemos las variables mpg, cyl y disp como filas de una matriz:</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2">x &lt;-<span class="st"> </span>mtcars[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] </a>
<a class="sourceLine" id="cb62-3" data-line-number="3"><span class="co"># y hp, drat y wt como columnas de la matriz:</span></a>
<a class="sourceLine" id="cb62-4" data-line-number="4">y &lt;-<span class="st"> </span>mtcars[<span class="dv">4</span><span class="op">:</span><span class="dv">6</span>]</a>
<a class="sourceLine" id="cb62-5" data-line-number="5"><span class="co">#la funcion cor() nos da la correlacion en cada caso:</span></a>
<a class="sourceLine" id="cb62-6" data-line-number="6"><span class="kw">cor</span>(x, y)</a></code></pre></div>
<pre><code>##              hp       drat         wt
## mpg  -0.7761684  0.6811719 -0.8676594
## cyl   0.8324475 -0.6999381  0.7824958
## disp  0.7909486 -0.7102139  0.8879799</code></pre>
<p>Valores cercanos a 1 indican correlación positiva, cercanos a -1 correlación negativa y cercanos a 0 poca correlación.</p>
</div>
<div id="regresion" class="section level2">
<h2><span class="header-section-number">4.2</span> Regresión</h2>
<p>Usamos regresión cuando tenemos un atributo <code>X</code> y queremos predecir una Respuesta o Variable de Salida <code>Y</code>, por ejemplo para saber cuanto mide alguien en función de cuanto pesa.</p>
<div id="regresion-lineal" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Regresión lineal</h3>
<p>Si tenemos sólo una variable o atributo hablamos de Regresión Linear Simple.
Cuando tenemos múltiples atributos (ej. x1, x2, x3,..) sería Regresión Linear Múltiple.</p>
<p>Se aplica la fórmula de la ecuación lineal: <code>y = a + b * x</code> y se trata de determinar los coeficientes <code>a</code> (determina dónde la línea intersecta con el eje Y) y <code>b</code> (pendiente de la línea).</p>
<p>Veamos este caso sencillo y tratemos de trazar la línea de regresión en base a alturas y pesos de una población de 10 personas:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">altura &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">156</span>, <span class="dv">155</span>, <span class="dv">142</span>, <span class="dv">177</span>, <span class="dv">139</span>, <span class="dv">156</span>, <span class="dv">171</span>, <span class="dv">169</span>, <span class="dv">150</span>, <span class="dv">175</span>)</a>
<a class="sourceLine" id="cb64-2" data-line-number="2">peso &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">83</span>, <span class="dv">50</span>, <span class="dv">53</span>, <span class="dv">111</span>, <span class="dv">45</span>, <span class="dv">71</span>, <span class="dv">75</span>, <span class="dv">73</span>, <span class="dv">60</span>, <span class="dv">76</span>)</a>
<a class="sourceLine" id="cb64-3" data-line-number="3"><span class="kw">plot</span>(peso, altura)</a></code></pre></div>
<p><img src="bookdown-rquer_files/figure-html/chunk-regli-1.png" width="672" /></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="kw">plot</span>(peso, altura, <span class="dt">pch =</span> <span class="dv">16</span>, <span class="dt">cex =</span> <span class="fl">1.3</span>, <span class="dt">col =</span> <span class="st">&quot;orange&quot;</span>, </a>
<a class="sourceLine" id="cb65-2" data-line-number="2">     <span class="dt">main =</span> <span class="st">&quot;Altura vs Peso&quot;</span>, </a>
<a class="sourceLine" id="cb65-3" data-line-number="3">     <span class="dt">xlab =</span> <span class="st">&quot;Peso (kg)&quot;</span>, </a>
<a class="sourceLine" id="cb65-4" data-line-number="4">     <span class="dt">ylab =</span> <span class="st">&quot;Altura (cm)&quot;</span>)</a>
<a class="sourceLine" id="cb65-5" data-line-number="5"><span class="co">#modelo lineal</span></a>
<a class="sourceLine" id="cb65-6" data-line-number="6"><span class="kw">lm</span>(altura <span class="op">~</span><span class="st"> </span>peso) </a></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = altura ~ peso)
## 
## Coefficients:
## (Intercept)         peso  
##    120.5135       0.5522</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="co">#vemos que el intercept es 120.5135 y el pendiente 0.5522. </span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="co">#Entonces finalmente trazamos la linea que mejor se ajusta (linea de regresión) </span></a>
<a class="sourceLine" id="cb67-3" data-line-number="3"><span class="co">#en nuestro plot:</span></a>
<a class="sourceLine" id="cb67-4" data-line-number="4"><span class="kw">abline</span>(<span class="fl">120.5135</span>, <span class="fl">0.5522</span>)</a>
<a class="sourceLine" id="cb67-5" data-line-number="5"><span class="co">#o sino también podemos visualizar la linea de regresion con:</span></a>
<a class="sourceLine" id="cb67-6" data-line-number="6"><span class="kw">abline</span>(<span class="kw">lm</span>(altura <span class="op">~</span><span class="st"> </span>peso))</a></code></pre></div>
<p><img src="bookdown-rquer_files/figure-html/chunk-regli-2.png" width="672" /></p>
</div>
<div id="regresion-logistica" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Regresión logística</h3>
<p>Otro tipo de regresión que nos es útil a menudo es la regresión logística. Se trata de un modelo de regresión dónde la variable dependiente es categórica.
Por ejemplo: la probabilidad de Aprobar (SI o NO) un examen en función del número de horas estudiadas, o la determinación de si un mail es <em>SPAM</em> o no en función de varios atributos o variables independientes (p.ej. el número de palabras, si contiene imágenes, links, etc.).</p>
<p>El modelo estima, por tanto, la probabilidad de una respuesta binaria (categórica) en base a uno o más predictores (o variables independientes) mediante una función logística.</p>
<p>Probemos con un ejemplo tonto en base a nuestros datos: probabilidad de ser chica en función del número de cromos que tiene una persona.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb68-3" data-line-number="3">misdatos &lt;-<span class="st"> </span>misdatos <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb68-4" data-line-number="4"><span class="co">#creo la variable Es_Chica</span></a>
<a class="sourceLine" id="cb68-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Es_chica =</span> <span class="kw">as.numeric</span>(Sexo <span class="op">==</span><span class="st"> &quot;f&quot;</span>))</a>
<a class="sourceLine" id="cb68-6" data-line-number="6"><span class="co">#uso geom_smooth para definir la curva de tendencia de la regresión logística</span></a>
<a class="sourceLine" id="cb68-7" data-line-number="7">regresion_logistica &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> misdatos, <span class="kw">aes</span>(<span class="dt">x =</span> Cromos,<span class="dt">y =</span> Es_chica)) <span class="op">+</span></a>
<a class="sourceLine" id="cb68-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;glm&quot;</span>, <span class="dt">method.args =</span> <span class="kw">list</span>(<span class="dt">family =</span> <span class="st">&quot;binomial&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb68-9" data-line-number="9"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;¿Es chica? 0(No) -1(Sí)&quot;</span>)</a>
<a class="sourceLine" id="cb68-10" data-line-number="10">regresion_logistica</a></code></pre></div>
<p><img src="bookdown-rquer_files/figure-html/chunk-rlogis-1.png" width="672" /></p>
</div>
</div>
<div id="proyectar-forecast" class="section level2">
<h2><span class="header-section-number">4.3</span> Proyectar (Forecast)</h2>
<p>Veamos ahora otro caso; supongamos que hemos ido anotando desde el año 2000 en un archivo las ventas de cada mes de nuestro negocio. Estaria bien poder predecir cuáles van a ser las de los proximos meses.</p>
<p>Podemos usar el paquete <strong>Forecast</strong> <span class="citation">(Hyndman et al. <a href="#ref-R-forecast">2017</a>)</span> desarrollado y mantenido por Rob Hyndman, para aplicar modelos proyectivos conocidos (tales como el modelo ARIMA).</p>
<p>Lo haríamos del siguiente modo:</p>
<p>Leemos los datos a partir de nuestro archivo ventas.csv.</p>
<p><code>df &lt;- read.csv(&quot;C:/.../ventas.csv&quot;)</code></p>
<p>Transformamos los datos en un objeto temporal (<em>time series object</em>) del tipo <code>ts</code> (indicamos que los datos son mensuales y que el periodo de inicio es Enero del 2000).</p>
<p>Mostramos los datos:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;_bookdown_files/ventas.csv&quot;</span>)</a>
<a class="sourceLine" id="cb69-2" data-line-number="2">series &lt;-<span class="st"> </span><span class="kw">ts</span>(df, <span class="dt">frequency =</span> <span class="dv">12</span>, <span class="dt">start =</span> <span class="kw">c</span>(<span class="dv">2000</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb69-3" data-line-number="3"><span class="kw">print</span>(series)</a></code></pre></div>
<pre><code>##        Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov
## 2000  6938  7524  8475  9401  9558  9182  9103 10513  9573 10254 11187
## 2001  7502  7524  8766  9867 10063  9635  9794 10628 10013 10346 11760
## 2002  7280  7902  9921  9869 10009  9893  9735 11157 10217 10730 12354
## 2003  7518  7961  9815 10168 10620 10301  9784 11264 10710 10439 12751
## 2004  7684  8991 10349 10570 11405 10554 10202 12134 10623 11250 12875
## 2005  8194  8835 10840 10131 11505 10654 10734 12461 10942 11635 13244
## 2006  8800  9499 10863 11825 12239 11451 11633 12971 11214 12384 13854
## 2007  9237 10171 12081 12386 13167 12280 12461 13734 12357 12948 14643
## 2008  9447 11170 12841 13124 13735 12953 12500 14610 13375 13369 15675
## 2009 10060 11450 13067 13362 13787 12935 12600 14818 12104 13218 15352
## 2010 10344 11730 13977 13195 14150 13210 12873 15113 12445 14006 15911
## 2011 10804 11662 13452 13691 14730 13496 13854 15522 13567 14601 16555
## 2012 11790 13344 14760 15058 15379 14237 14667 15588 14224 15570 17230
## 2013 12046 13878 15727 15708 15989 15559 15218 16697 14960 16509 18402
## 2014 12893 14474 16386 16848 17103 16505 16275 17832 16767 17253 19391
## 2015 13927 15077 18045 17096 18474 17289 16883 18850 16765 17614 20550
## 2016 14170 15877 17764 17098 19081 17006 17366 19038 15881 16791 18753
## 2017 13382 14681 15560 16334 17260 15429 16002 17650 15624 17046 18324
##        Dec
## 2000 18395
## 2001 18851
## 2002 20016
## 2003 20002
## 2004 19944
## 2005 21118
## 2006 22418
## 2007 24286
## 2008 24875
## 2009 24534
## 2010 25350
## 2011 26760
## 2012 28406
## 2013 30276
## 2014 31462
## 2015 30635
## 2016 26718
## 2017 27110</code></pre>
<p>Ploteamos la serie temporal. Nos aseguramos que el eje <code>y</code> empieza por cero.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="kw">plot</span>(series, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">35000</span>))</a></code></pre></div>
<p><img src="bookdown-rquer_files/figure-html/chunk-plotseries-1.png" width="672" /></p>
<p>Generemos ahora una prevision para los próximos 20 periodos en base al modelo ARIMA. Lo hacemos en dos pasos:
1) creamos un modelo usando la función <code>auto.arima</code> del paquete <code>forecast</code>
2) generamos una proyección en base al modelo usando la función <code>forecast</code></p>
<p>Representamos gráficamente la previsión:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="kw">require</span>(forecast)</a></code></pre></div>
<pre><code>## Loading required package: forecast</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">model_arima &lt;-<span class="st"> </span><span class="kw">auto.arima</span>(series)</a>
<a class="sourceLine" id="cb74-2" data-line-number="2">fcast_arima &lt;-<span class="st"> </span><span class="kw">forecast</span>(model_arima, <span class="dt">h =</span> <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb74-3" data-line-number="3"><span class="kw">plot</span>(fcast_arima)</a></code></pre></div>
<p><img src="bookdown-rquer_files/figure-html/chunk-forecast-1.png" width="672" /></p>

</div>
</div>
<h3>Referencias</h3>
<div id="refs" class="references">
<div id="ref-R-forecast">
<p>Hyndman, Rob, Mitchell O’Hara-Wild, Christoph Bergmeir, Slava Razbash, and Earo Wang. 2017. <em>Forecast: Forecasting Functions for Time Series and Linear Models</em>. <a href="https://CRAN.R-project.org/package=forecast" class="uri">https://CRAN.R-project.org/package=forecast</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-para-explorar.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-para-visualizar.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-rquer/edit/master/03-R_para_predecir.Rmd",
"text": "Edit"
},
"download": ["bookdown-rquer.pdf", "bookdown-rquer.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
